# 基本的なログイン機構

## セッションを使った状態保持

セッションを作成するにはform_forの引数を具体的に渡す必要がある｡

```ruby
form_for(:session, url: login_path) do |f|
```

フォームから送信される情報は

```
params: {
    session: {
        email: 'email',
        password: 'password'
    }
}
```

という形状で渡されることになる｡
したがってコントローラー側で`params[:session][:email]`などでアクセス可能である｡

## 一時的なフラッシュメッセージの作成

`flash.now`メソッドを使うことで一時的なフラッシュメッセージを作ることができる｡
初期のレンダリングでは表示されるがその後リクエストを発行すると破棄される｡

## クッキーを使ったセッションの実装

ブラウザを閉じるとセッションは破棄されるものとする
セッションを実装するにあたりさまざまなメソッドを定義するがそれを全コントローラーで使えるようにするための作業をまず行う｡

### セッション用のヘルパーモジュールをアプリケーションコントローラーに読み込む

コントローラーを生成した時点でhelper/sessions_helper.rbというヘルパーモジュールが自動生成しています｡
このモジュールを全コントローラーで使えるようにするためにアプリケーションコントローラーにインクルードします

```ruby
protect_from_forgery with: :exception
include SessionsHelper
```
